
{% include 'haoAdmin/head.html' %}

<body>
	<div class="admin-main">

		<blockquote class="layui-elem-quote">
			<a href="javascript:;" class="layui-btn layui-btn-small" id="add">
				<i class="layui-icon">&#xe608;</i> 字典分类录入
			</a>
		</blockquote>

		<fieldset class="layui-elem-field" style="width: 55%; float: left">
			<legend>字典分类列表</legend>
			<div class="layui-field-box">
				<table class="site-table table-hover">
					<thead>
						<tr>
							<th>字典名称</th>
							<th>字典code</th>
							<th>操作</th>
						</tr>
					</thead>

					<tbody id="tbodys">

					</tbody>

					<script type="text/html" id="body_tpl">
						{% raw %}
							{{# layui.each(d.one_level_menu, function(index, item){ }}
								<tr>
									<td>{{ item.title }}</td>
									<td>{{ item.sort }}</td>
									<td>
										<a href="javascript:;" class="layui-btn layui-btn-mini">编辑</a>
										<a href="javascript:;" class="layui-btn layui-btn-danger layui-btn-mini">删除</a>
										<a href="javascript:;" class="layui-btn layui-btn-normal layui-btn-mini">子菜单</a>
									</td>
								</tr>
							{{# }) }}
						{% endraw %}
					</script>

				</table>
			</div>
		</fieldset>

		<fieldset class="layui-elem-field" style="width: 40%; float: right">
			<legend>数据列表</legend>
			<div class="layui-field-box">
				<table class="site-table table-hover">
					<thead>
						<tr>
							<th>类型名称</th>
							<th>类型编码</th>
							<th>操作</th>
						</tr>
					</thead>

					<tbody id="tbodys2">

					</tbody>

					<script type="text/html" id="body_tpl2">
						{% raw %}
							{{# layui.each(d.one_level_menu, function(index, item){ }}
								<tr>
									<td>{{ item.title }}</td>
									<td>{{ item.sort }}</td>
									<td>{{ item.org_name }}</td>
									<td>
										<a href="javascript:;" class="layui-btn layui-btn-normal layui-btn-mini">子菜单</a>
										<a href="javascript:;" class="layui-btn layui-btn-mini">编辑</a>
										<a href="javascript:;" class="layui-btn layui-btn-danger layui-btn-mini">删除</a>
									</td>
								</tr>
							{{# }) }}
						{% endraw %}
					</script>

				</table>
			</div>
		</fieldset>

		<div class="admin-table-page">
			<div id="page" class="page">
			</div>
		</div>
	</div>


	<script>
		$(function(){
			init_data();
		});

		function init_data(){
			ajaxReq("menu/get_parent_menu", function(data){
				console.log(data)

				layui.use(['laytpl'], function(){
					var laytpl = layui.laytpl;
					var tpl = document.getElementById('menu_tpl').innerHTML; //读取模版
					//方式一：异步渲染（推荐）
					laytpl(tpl).render(data, function(render){
					  document.getElementById('tbodys').innerHTML = render;
					});
				});
			});
		}



		/*layui.config({
			base: 'plugins/layui/modules/'
		});

		layui.use(['icheck', 'laypage','layer'], function() {
			var $ = layui.jquery,
				laypage = layui.laypage,
				layer = parent.layer === undefined ? layui.layer : parent.layer;
			$('input').iCheck({
				checkboxClass: 'icheckbox_flat-green'
			});

			//page
			laypage({
				cont: 'page',
				pages: 25 //总页数
					,
				groups: 5 //连续显示分页数
					,
				jump: function(obj, first) {
					//得到了当前页，用于向服务端请求对应数据
					var curr = obj.curr;
					if(!first) {
						//layer.msg('第 '+ obj.curr +' 页');
					}
				}
			});

			$('#search').on('click', function() {
				parent.layer.alert('你点击了搜索按钮')
			});

			$('#add').on('click', function() {
				$.get('temp/edit-form.html', null, function(form) {
					layer.open({
						type: 1,
						title: '添加表单',
						content: form,
						btn: ['保存', '取消'],
						area: ['600px', '400px'],
						maxmin: true,
						yes: function(index) {
							console.log(index);
						},
						full: function(elem) {
							var win = window.top === window.self ? window : parent.window;
							$(win).on('resize', function() {
								var $this = $(this);
								elem.width($this.width()).height($this.height()).css({
									top: 0,
									left: 0
								});
								elem.children('div.layui-layer-content').height($this.height() - 95);
							});
						}
					});
				});
			});

			$('#import').on('click', function() {
				var that = this;
				var index = layer.tips('只想提示地精准些', that,{tips: [1, 'white']});
				$('#layui-layer'+index).children('div.layui-layer-content').css('color','#000000');
			});

			$('.site-table tbody tr').on('click', function(event) {
				var $this = $(this);
				var $input = $this.children('td').eq(0).find('input');
				$input.on('ifChecked', function(e) {
					$this.css('background-color', '#EEEEEE');
				});
				$input.on('ifUnchecked', function(e) {
					$this.removeAttr('style');
				});
				$input.iCheck('toggle');
			}).find('input').each(function() {
				var $this = $(this);
				$this.on('ifChecked', function(e) {
					$this.parents('tr').css('background-color', '#EEEEEE');
				});
				$this.on('ifUnchecked', function(e) {
					$this.parents('tr').removeAttr('style');
				});
			});
			$('#selected-all').on('ifChanged', function(event) {
				var $input = $('.site-table tbody tr td').find('input');
				$input.iCheck(event.currentTarget.checked ? 'check' : 'uncheck');
			});
		});*/
	</script>
</body>
